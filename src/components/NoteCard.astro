---
interface Props {
  id: string;
  title: string;
  date: string;
  description: string;
  topic: string;
  slug: string;
}

const { id, title, date, description, topic, slug } = Astro.props;

// Format date to be more readable
const formattedDate = new Date(date).toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});

// Topic color mapping
const getTopicColor = (topic: string) => {
  switch (topic.toLowerCase()) {
    case "docker":
      return "bg-blue-100 text-blue-800 border-blue-200";
    case "webdev":
      return "bg-green-100 text-green-800 border-green-200";
    case "animations":
      return "bg-purple-100 text-purple-800 border-purple-200";
    default:
      return "bg-gray-100 text-gray-800 border-gray-200";
  }
};
---

<article
  class="note-card group relative overflow-hidden rounded-lg border border-border bg-background p-6 transition-all duration-300 hover:shadow-lg hover:shadow-black/5"
  data-note-id={id}
>
  <div class="flex flex-col gap-4">
    <!-- Header with topic badge and date -->
    <header class="flex items-start justify-between gap-4">
      <span
        class={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium ${getTopicColor(topic)}`}
      >
        {topic}
      </span>
      <time class="text-sm text-secondary" datetime={date}>
        {formattedDate}
      </time>
    </header>

    <!-- Title -->
    <h3
      class="text-xl font-semibold text-foreground group-hover:text-primary transition-colors"
    >
      {title}
    </h3>

    <!-- Description -->
    <p class="text-sm text-secondary line-clamp-3 leading-relaxed">
      {description}
    </p>

    <!-- Read more indicator -->
    <footer class="flex items-center gap-2 text-sm text-primary">
      <span>Read note</span>
      <svg
        class="size-4 transition-transform group-hover:translate-x-1"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
      </svg>
    </footer>
  </div>

  <!-- Hover overlay -->
  <div
    class="absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 transition-opacity group-hover:opacity-100"
  >
  </div>
</article>

<style>
  .note-card {
    backdrop-filter: blur(10px);
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
